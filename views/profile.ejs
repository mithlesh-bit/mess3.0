<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />

  <title>profile with data and skills - Bootdey.com</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="../css/style.css" rel="stylesheet" />
  <style type="text/css">
  </style>
</head>

<body>
  <div class="container">
    <div class="main-body">
      <nav aria-label="breadcrumb" class="main-breadcrumb">

      </nav>
      <div class="row gutters-sm">
        <div class="col-md-4 mb-3">
          <div class="card">
            <div class="card-body">
              <div class="d-flex flex-column align-items-center text-center">
                <img
                  src="https://images.unsplash.com/photo-1511367461989-f85a21fda167?auto=format&fit=crop&q=60&w=500&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D"
                  alt="Admin" class="rounded-5" width="250" />
                <div class="mt-3">
                  <h4>
                    <%=user.name%>
                  </h4>
                  <div class="row">
                    <div class="col-sm-12 mt-2 mb-2">
                      <h2 class="btn btn-info pl-4 pr-4">
                        <%=user.interval%>
                      </h2>
                    </div>
                  </div>
                  <p class="text-secondary mb-1">
                    <%=user.email%>
                  </p>
                  <p class="text-muted font-size-sm">
                    <%=user.college%>
                </div>
              </div>
            </div>
          </div>
          <div class="card mt-4 p-3">
            <ul class="list-group list-group-flush">

              <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                <h6 class="mb-0">
                  <img src="./assets/phone.svg" width="20" height="20" /> Number
                </h6>
                <span class="text-secondary">
                  <%=user.number%>
                </span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                <h6 class="mb-0">
                  <img src="./assets/location.svg" width="20" height="20" /> Location
                </h6>
                <span class="text-secondary">
                  <%=user.address%>
                </span>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md-8 ">
          <div class="card mb-3 p-3">
            <div class="card-body">
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Total Amount</h6>
                </div>
                <div class="col-sm-9 font-weight-bold text-black">
                  <%=user.amount%>
                </div>
              </div>
              <hr />
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Card Id</h6>
                </div>
                <div class="col-sm-9 text-secondary">123456</div>
              </div>
              <hr />
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">recgarge Date</h6>
                </div>
                <div class="col-sm-9 text-secondary">
                  <%=user.date%>
                </div>
              </div>


              <hr />

              <div class="button-container">

              
                <a href="recharge" class="contain_btn"
                 >Recharge Card</a>
                <a href="profile/editProfile" class="contain_btn" >Edit Profile</a>


                <a href="profile/recharge" class="contain_btn">Recharge Card</a>
                <a href="profile/editprofile" class="contain_btn">Edit Profile</a>
                <a href="#" class="contain_btn" data-toggle="modal" data-target="#skipMealModal">Skip Meal</a>

              </div>
              <!-- <form action="profile" method="post">
                <input type="radio" id="lunch" name="mealToday" value="lunch only">
                <label for="option1">lunch</label><br>

                <input type="radio" id="dinner" name="mealToday" value="dinner only">
                <label for="option2">dinner</label><br>

                <input type="radio" id="option3" name="mealToday" value="lunch&dinner">
                <label for="option3">Both</label><br>

                <input type="submit" value="Submit">
              </form> -->


            </div>

            <div class="card-body">
              <% if (user.money && user.money.length> 0) { %>
                <table id="datatablesSimple">
                  <h1>recharges</h1>
                  <thead>
                    <tr>
                      <th>Date & Time</th>
                      <th>Amount</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% user.money.reverse().forEach(function(moneyEntry) { %>
                      <tr>
                        <td>
                          <%= moneyEntry.recharges %>
                        </td>
                        <td>
                          <%= moneyEntry.date %>
                        </td>
                        <td>Done</td>
                      </tr>
                      <% }); %>
                  </tbody>
                </table>
                <% } else { %>
                  <p>No recharges found.</p>
                  <% } %>
            </div>
            <div class="card-body">
              <% if (user.money && user.money.length> 0) { %>
                <table id="datatablesSimple">
                  <h1>recharges</h1>
                  <thead>
                    <tr>
                      <th>Date & Time</th>
                      <th>Amount</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% user.money.reverse().forEach(function(moneyEntry) { %>
                      <tr>
                        <td>
                          <%= moneyEntry.recharges %>
                        </td>
                        <td>
                          <%= moneyEntry.date %>
                        </td>
                        <td>Done</td>
                      </tr>
                      <% }); %>
                  </tbody>
                </table>
                <% } else { %>
                  <p>No recharges found.</p>
                  <% } %>
            </div>

          </div>

        </div>

      </div>





      <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
      <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.bundle.min.js"></script>
      <script type="text/javascript"></script>
</body>
<!-- Skip Meal Modal -->
<form action="profile" method="post">
  <div class="modal fade" id="skipMealModal" tabindex="-1" role="dialog" aria-labelledby="skipMealModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="skipMealModalLabel">Skip Meal</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Choose when to skip your next meal:</p>
          <div class="form-check">
            <input type="radio" name="skipMealOption" id="morningOption" class="form-check-input" value="morning">
            <label for="morningOption" class="form-check-label">Morning</label>
            <!-- Add this to your modal body -->
            <p id="currentDateForMorning" class="text-secondary"></p>


          </div>
          <div class="form-check">
            <input type="radio" name="skipMealOption" id="nightOption" class="form-check-input" value="night">
            <label for="nightOption" class="form-check-label">Night</label>
            <p id="currentDateForNight" class="text-secondary"></p>
          </div>
          <div class="form-check">
            <input type="radio" name="skipMealOption" id="haltOption" class="form-check-input" value="halt">
            <label for="haltOption" class="form-check-label">Halt</label>
          </div>
          <div class="form-check">
            <input type="radio" name="skipMealOption" id="restartOption" class="form-check-input" value="restart">
            <label for="restartOption" class="form-check-label">Restart</label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary" onclick="skipMeal()">Skip Meal</button>
        </div>
      </div>
    </div>
  </div>
</form>

<!-- ... your existing HTML code ... -->


<script>
  // Function to update date in the modal
  function updateDate() {
    var currentDateTimeForMorning = new Date();

    // If it's past 7 am, move to the next day
    if (currentDateTimeForMorning.getHours() >= 7) {
      currentDateTimeForMorning.setDate(currentDateTimeForMorning.getDate() + 1);
    }

    // Format the date as 'DD/MM/YY'
    var formattedDateForMorning = `${currentDateTimeForMorning.getDate().toString().padStart(2, '0')}/${(currentDateTimeForMorning.getMonth() + 1).toString().padStart(2, '0')}/${currentDateTimeForMorning.getFullYear().toString().slice(-2)}`;

    document.getElementById('currentDateForMorning').textContent = formattedDateForMorning;

    var currentDateTimeForNight = new Date();

    // If it's past 7 am, move to the next day
    if (currentDateTimeForNight.getHours() >= 19) {
      currentDateTimeForNight.setDate(currentDateTimeForNight.getDate() + 1);
    }

    // Format the date as 'DD/MM/YY'
    var formattedDateForNight = `${currentDateTimeForNight.getDate().toString().padStart(2, '0')}/${(currentDateTimeForNight.getMonth() + 1).toString().padStart(2, '0')}/${currentDateTimeForNight.getFullYear().toString().slice(-2)}`;

    document.getElementById('currentDateForNight').textContent = formattedDateForNight;
  }

  // Function to handle the Skip Meal button click
  function skipMeal() {
    // Add logic to handle the selected option
    var selectedOption = document.querySelector('input[name="skipMealOption"]:checked');
    if (selectedOption) {
      var selectedValue = selectedOption.value;
      console.log("Selected option:", selectedValue);
      // Add your logic here to handle the selected option (e.g., make an API call)
    } else {
      console.log("Please select an option");
      // Add your logic for handling when no option is selected
    }

    // Close the modal
    $('#skipMealModal').modal('hide');
  }

  // Event listener to trigger when the modal is about to be shown
  $('#skipMealModal').on('show.bs.modal', function (e) {
    // Update date when the modal is opened
    updateDate();
  });

</script>

</html>